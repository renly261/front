(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"94e2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-xl q-mt-xl",attrs:{id:"adminProductBuy"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12 col-md-6 flex justify-center items-end",attrs:{id:"image"}},[a("q-img",{attrs:{src:t.image}})],1),a("div",{staticClass:"col-12 col-md-6 flex justify-center",attrs:{id:"info"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-h3"},[t._v(t._s(t.name))])]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-h4"},[t._v("$ "+t._s(t.price))])]),a("div",{staticClass:"col-12"},[a("q-form",[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"swap_horiz"}})],1),a("q-item-section",[a("q-slider",{staticStyle:{width:"80%"},attrs:{state:t.amountstate,min:0,max:10,label:"","label-value":t.amount,markers:""},model:{value:t.amount,callback:function(e){t.amount=t._n(e)},expression:"amount"}},[t._v(t._s(t.amount))])],1)],1)],1)],1),a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-h6"},[t._v("您目前選擇了 "+t._s(t.amount)+" 個，總金額是 "+t._s(t.amount*t.price)+" 元")])]),a("div",{staticClass:"col-12 col-lg-3"},[a("q-btn",{attrs:{icon:"add_shopping_cart",label:"加入購物車","fab-mini":"",outline:""},on:{click:t.addcart}})],1),a("div",{staticClass:"col-12 col-lg-3"},[a("q-btn",{attrs:{icon:"favorite_border",label:"加入收藏清單","fab-mini":"",outline:""},on:{click:t.addFavorite}})],1)])]),a("div",{staticClass:"col-12 flex justify-center q-mt-xl"},[a("div",{staticClass:"q-gutter-y-md",staticStyle:{width:"100%"}},[a("q-tabs",{staticClass:"text-primary",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"商品說明",icon:"mail",label:"商品說明"}}),a("q-tab",{attrs:{name:"商品規格",icon:"alarm",label:"商品規格"}})],1),a("q-tab-panels",{staticClass:"q-pa-xl",attrs:{animated:"",swipeable:"","transition-prev":"jump-up","transition-next":"jump-up"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"商品說明"}},[a("div",{staticClass:"text-body1 q-px-xl"},[t._v(t._s(t.description))])]),a("q-tab-panel",{attrs:{name:"商品規格"}},[a("div",{staticClass:"text-body1 q-px-xl"},[t._v(t._s(t.detail))])]),a("q-tab-panel",{attrs:{name:"商品評價"}},[a("div",{staticClass:"text-body1 q-px-xl"})])],1)],1)])])])},r=[],n=a("c973"),i=a.n(n),o=(a("b0c0"),a("a4d3"),a("e01a"),a("99af"),a("96cf"),{name:"AdminProductBuy",data:function(){return{name:"",price:"",description:"",detail:"",image:"",sell:!0,amount:0,tab:"商品說明"}},computed:{amountstate:function(){return 0===this.amount?null:this.amount>0}},methods:{addcart:function(){var t=this;return i()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.amountstate){e.next=3;break}return t.$swal({icon:"error",title:"錯誤",text:"商品數量必須 > 0"}),e.abrupt("return");case 3:if(0!==t.$store.state.user.jwt.token.length){e.next=6;break}return t.$swal({icon:"error",title:"錯誤",text:"請先登入"}),e.abrupt("return");case 6:return e.prev=6,e.next=9,t.axios.post("/users/cart",{product:t.$route.params.id,amount:t.amount},{headers:{authorization:"Bearer "+t.$store.state.user.jwt.token}});case 9:t.$swal({title:"加入購物車成功!你是否要前往結帳?",icon:"success",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"前往結帳",denyButtonText:"繼續購物"}).then((function(e){e.isConfirmed?t.$swal("感謝您祝您購物愉快","","success",t.$router.push("/cart")):e.isDenied&&t.$swal("歡迎回來繼續購物","","success",t.$router.push("/adminProduct"))})),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),t.$swal({icon:"error",title:"錯誤",text:"加入購物車失敗"});case 15:case"end":return e.stop()}}),e,null,[[6,12]])})))()},addFavorite:function(){var t=this;return i()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.$store.state.user.jwt.token.length){e.next=3;break}return t.$swal({icon:"error",title:"錯誤",text:"請先登入"}),e.abrupt("return");case 3:return e.prev=3,e.next=6,t.axios.post("/users/favorite",{product:t.$route.params.id},{headers:{authorization:"Bearer "+t.$store.state.user.jwt.token}});case 6:t.$swal({icon:"success",title:"成功",text:"成功加入收藏清單"}),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](3),t.$swal({icon:"error",title:"錯誤",text:"此商品已在收藏清單內"}),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()}},mounted:function(){var t=this;return i()(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/products/"+t.$route.params.id);case 3:a=e.sent,s=a.data,t.name=s.result.name,t.price=s.result.price,t.description=s.result.description,t.detail=s.result.detail,t.image="".concat("https://renly-eshop.herokuapp.com","/files/").concat(s.result.image),t.sell=s.result.sell,document.title="iCom ".concat(t.name," 購買頁面"),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),t.$router.push("/");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()}}),c=o,l=a("2877"),u=a("9989"),d=a("068f"),m=a("0378"),p=a("66e5"),b=a("4074"),v=a("0016"),x=a("c1d0"),f=a("9c40"),h=a("429b"),w=a("7460"),q=a("adad"),g=a("823b"),C=a("eebe"),k=a.n(C),$=Object(l["a"])(c,s,r,!1,null,null,null);e["default"]=$.exports;k()($,"components",{QPage:u["a"],QImg:d["a"],QForm:m["a"],QItem:p["a"],QItemSection:b["a"],QIcon:v["a"],QSlider:x["a"],QBtn:f["a"],QTabs:h["a"],QTab:w["a"],QTabPanels:q["a"],QTabPanel:g["a"]})}}]);