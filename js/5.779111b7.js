(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"75fd":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{id:"navDrawer",view:"hHh LpR fff"}},[a("q-header",{attrs:{elevated:""}},[a("q-toolbar",{staticClass:"row bg-light-blue-9 text-white shadow-2",staticStyle:{height:"60px"}},[a("q-btn",{staticClass:"q-mr-sm",attrs:{id:"menu",flat:"",round:"",dense:"",icon:"menu"},on:{click:function(e){t.drawer=!t.drawer}}}),a("q-btn",{attrs:{id:"logo",stretch:"",flat:"",label:"iCom 電腦產品購物網",to:"/"}}),t.user.islogin||t.user.isAdmin?a("q-img",{staticClass:"q-ml-auto q-mr-lg",attrs:{src:t.form.image}}):t._e(),t.user.islogin||t.user.isAdmin?a("div",{staticClass:"text-body1 q-mr-xl",attrs:{id:"name"}},[t._v(t._s(t.form.account)+" 您好")]):t._e()],1)],1),a("q-drawer",{attrs:{id:"mainDrawer","show-if-above":"",width:200,breakpoint:700,bordered:"","content-class":"bg-grey-3"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("q-scroll-area",{staticClass:"fit"},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"col-12",attrs:{clickable:"",to:"/about"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"info"}})],1),a("q-item-section",[t._v("關於我們")])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"col-12",attrs:{clickable:"",to:"/adminProduct"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"store"}})],1),a("q-item-section",[t._v("最新產品")])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"col-12",attrs:{clickable:"",to:"/favorite"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"favorite"}})],1),a("q-item-section",[t._v("收藏清單")])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"col-12",attrs:{clickable:"",to:"/question"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"contact_support"}})],1),a("q-item-section",[t._v("常見問題")])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"col-12 q-mt-auto",attrs:{clickable:""}},[a("q-expansion-item",{attrs:{"expand-separator":"",icon:"account_circle",label:"會員專區",caption:""}},[a("div",{staticClass:"q-list"},[t.user.islogin?t._e():a("q-btn",{attrs:{label:"會員註冊",stretch:"",flat:""},on:{click:function(e){t.register=!0}}}),a("q-dialog",{model:{value:t.register,callback:function(e){t.register=e},expression:"register"}},[a("q-card",{attrs:{id:"refisterCard"}},[a("q-form",{staticClass:"q-gutter-md",on:{submit:t.submitRegister,reset:t.reset}},[a("h5",{staticClass:"text-center q-mt-xl"},[t._v("會員註冊")]),a("h6",{staticClass:"q-pa-md",staticStyle:{"margin-bottom":"0px"}},[t._v("個人資料")]),a("q-card-section",{staticStyle:{"margin-top":"0px"}},[a("q-input",{attrs:{filled:"",label:"帳號",hint:"可以使用",error:!t.state.account,"error-message":"帳號長度請在 4 ~ 20 個字之間"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("q-card-section",[a("q-input",{attrs:{filled:"",label:"密碼",hint:"可以使用",error:!t.state.password,"error-message":"密碼長度請在 4 ~ 20 個字之間"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("q-card-section",[a("q-input",{attrs:{filled:"",label:"信箱",hint:"可以使用",error:!t.state.email,"error-message":"請輸入正確的信箱格式"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("h6",{staticClass:"q-pa-md q-mt-lg",staticStyle:{"margin-bottom":"0px"}},[t._v("使用者頭像")]),a("q-card-section",{staticClass:"text-center",staticStyle:{"margin-top":"0px"}},[a("img-inputer",{attrs:{theme:"dark",size:"large",placeholder:"上傳你的大頭貼","bottom-text":"點擊或拖曳以修改"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1),a("h6",{staticClass:"q-pa-md q-mt-lg",staticStyle:{"margin-bottom":"0px"}},[t._v("收貨地址")]),a("q-card-section",{staticStyle:{"margin-top":"0px"}},[a("div",{staticClass:"row q-gutter-md"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",label:"郵遞區號"},model:{value:t.zip,callback:function(e){t.zip=e},expression:"zip"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",label:"縣市"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",label:"鄉鎮市區"},model:{value:t.township,callback:function(e){t.township=e},expression:"township"}})],1)]),a("div",{staticClass:"row q-gutter-md q-mt-md"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",label:"街道名稱"},model:{value:t.road,callback:function(e){t.road=e},expression:"road"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",label:"住址號碼"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",label:"住戶樓層"},model:{value:t.floor,callback:function(e){t.floor=e},expression:"floor"}})],1)])]),a("q-card-section",{staticClass:"text-center q-mt-lg"},[a("div",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"送出",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"重寫",type:"reset",color:"primary",flat:""}})],1)])],1)],1)],1),t.user.islogin?t._e():a("q-btn",{attrs:{label:"會員登入",stretch:"",flat:""},on:{click:function(e){t.login=!0}}}),a("q-dialog",{model:{value:t.login,callback:function(e){t.login=e},expression:"login"}},[a("q-card",{attrs:{id:"loginCard"}},[a("q-form",{staticClass:"q-gutter-md q-pa-md",staticStyle:{width:"400px",height:"100%"},on:{submit:t.submitLogin,reset:t.reset}},[a("q-card-section",[a("div",{staticClass:"text-h5 text-center"},[t._v("會員登入")])]),a("q-card-section",[a("q-input",{attrs:{filled:"",label:"帳號",hint:"可以使用","error-message":"帳號長度請在 4 ~ 20 個字之間",error:!t.state.account},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("q-card-section",[a("q-input",{attrs:{filled:"",label:"密碼",hint:"可以使用","error-message":"密碼長度請在 4 ~ 20 個字之間",error:!t.state.password},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("q-card-section",[a("div",{staticClass:"text-center"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"送出",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"重寫",type:"reset",color:"primary",flat:""}})],1)])],1)],1)],1),t.user.islogin?a("q-btn",{attrs:{stretch:"",flat:"",label:"會員登出"},on:{click:t.logout}}):t._e(),t.user.islogin&&!t.user.isAdmin?a("q-btn",{attrs:{to:"/userMemberManage",stretch:"",flat:"",label:"使用者後台管理"}}):t._e(),t.user.islogin&&t.user.isAdmin?a("q-btn",{attrs:{to:"/adminMemberManage",stretch:"",flat:"",label:"管理者後台管理"}}):t._e()],1)])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"col-12",attrs:{clickable:"",to:"/cart"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"shopping_cart"}})],1),a("q-item-section",[t._v("購物車")])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"col-12",attrs:{clickable:""},on:{click:t.drakMode}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"settings_brightness"}})],1),a("q-item-section",[t._v("黑暗模式")])],1)],1)],1),a("q-page-container",[a("vue-page-transition",{attrs:{name:"fade-in-right"}},[a("router-view")],1)],1),a("q-footer",{staticClass:"bg-grey-8 text-white",attrs:{elevated:""}},[a("q-toolbar",{staticClass:"row"},[a("q-avatar",{staticClass:"col-4 flex justify-center"},[a("a",{attrs:{href:"#"}},[a("q-icon",{attrs:{name:"fab fa-instagram"}})],1),a("a",{attrs:{href:"#"}},[a("q-icon",{attrs:{name:"fab fa-twitter"}})],1),a("a",{attrs:{href:"#"}},[a("q-icon",{attrs:{name:"fab fa-facebook"}})],1),a("a",{attrs:{href:"#"}},[a("q-icon",{attrs:{name:"fab fa-youtube"}})],1)]),a("q-toolbar-title",{staticClass:"col-4 flex justify-center"},[t._v("Copyright © 20201 iCom.")]),a("div",{staticClass:"text-body col-4 flex justify-center"},[t._v("243新北市泰山區貴子里致遠新村55之1號")])],1)],1)],1)},s=[],i=a("c973"),o=a.n(i),n=(a("99af"),a("96cf"),a("edd5")),l={name:"NavFooter",data:function(){return{register:!1,login:!1,drawer:!1,form:{account:"",password:"",email:"",image:"",address:""},zip:"",city:"",township:"",road:"",number:"",floor:""}},computed:{state:function(){var t=this.form.account,e=this.form.password,a=this.form.email;return{account:0===t.length?null:t.length>=4&&t.length<=20,password:0===e.length?null:e.length>=4&&e.length<=20,email:0===a.length?null:Object(n["a"])(a)}}},methods:{drakMode:function(){this.$q.dark.toggle()},submitRegister:function(){var t=this;return o()(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in e.prev=0,t.form.address=t.zip+" "+t.city+t.township+t.road+t.number+t.floor,a=new FormData,t.form)a.append(r,t.form[r]);return e.next=6,t.axios.post("/users",a);case 6:t.$swal({icon:"success",title:"成功",text:"註冊成功"}),"/"!==t.$route.path&&t.$router.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$swal({icon:"error",title:"註冊失敗",text:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},submitLogin:function(){var t=this;return o()(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.post("/users/login",t.form);case 3:a=e.sent,r=a.data,t.$swal({icon:"success",title:"成功",text:"登入成功"}),t.form.image="".concat("","/files/").concat(r.image),t.$store.commit("user/login",r),"/"!==t.$route.path&&t.$router.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),t.$swal({icon:"error",title:"登入失敗",text:e.t0.response.data.message}),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()},reset:function(){this.form.account="",this.form.password="",this.form.email="",this.form.image=null},logout:function(){var t=this;return o()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.delete("/users/logout",{headers:{authorization:"Bearer "+t.$store.state.user.jwt.token}});case 3:t.$swal({icon:"success",title:"成功",text:"登出成功"}),t.$store.commit("user/logout"),"/"!==t.$route.path&&t.$router.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"登出失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},mounted:function(){var t=this;return o()(regeneratorRuntime.mark((function e(){var a,r,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.$store.state.user.jwt.token.length){e.next=2;break}return e.abrupt("return");case 2:if(a=Date.now()-t.$store.state.user.jwt.received,e.prev=3,!(a>5184e5)){e.next=10;break}return e.next=7,t.axios.post("/users/extend",{},{headers:{authorization:"Bearer "+t.$store.state.user.jwt.token}});case 7:r=e.sent,s=r.data,t.$store.commit("user/extend",s.result);case 10:return e.next=12,t.axios.get("/users/",{headers:{authorization:"Bearer "+t.$store.state.user.jwt.token}});case 12:i=e.sent,o=i.data,t.form.image="".concat("","/files/").concat(o.result.image),t.form.account=o.result.account,t.$store.commit("user/getinfo",o.result),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](3),t.$store.commit("user/logout");case 22:case"end":return e.stop()}}),e,null,[[3,19]])})))()}},c=l,m=a("2877"),u=a("4d5a"),p=a("e359"),d=a("65c6"),f=a("9c40"),b=a("068f"),g=a("9404"),v=a("4983"),q=a("66e5"),h=a("4074"),w=a("0016"),x=a("3b73"),k=a("1c1c"),C=a("24e8"),y=a("f09f"),$=a("0378"),_=a("a370"),Q=a("27f9"),R=a("09e3"),S=a("7ff0"),j=a("cb32"),N=a("6ac5"),z=a("714f"),A=a("7f67"),D=a("eebe"),I=a.n(D),M=Object(m["a"])(c,r,s,!1,null,null,null);e["default"]=M.exports;I()(M,"components",{QLayout:u["a"],QHeader:p["a"],QToolbar:d["a"],QBtn:f["a"],QImg:b["a"],QDrawer:g["a"],QScrollArea:v["a"],QItem:q["a"],QItemSection:h["a"],QIcon:w["a"],QExpansionItem:x["a"],QList:k["a"],QDialog:C["a"],QCard:y["a"],QForm:$["a"],QCardSection:_["a"],QInput:Q["a"],QPageContainer:R["a"],QFooter:S["a"],QAvatar:j["a"],QToolbarTitle:N["a"]}),I()(M,"directives",{Ripple:z["a"],ClosePopup:A["a"]})}}]);