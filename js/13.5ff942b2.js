(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"4db2":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{attrs:{id:"adminProduct"}},[e("q-drawer",{attrs:{id:"productDrawer","show-if-above":"",mini:t.miniState,width:250,breakpoint:400,bordered:"","content-class":"bg-grey-3",side:"right"},on:{mouseover:function(a){t.miniState=!1},mouseout:function(a){t.miniState=!0}},model:{value:t.drawer,callback:function(a){t.drawer=a},expression:"drawer"}},[e("q-scroll-area",{staticClass:"fit"},[e("q-list",{attrs:{padding:""}},[e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[e("q-item-section",{attrs:{avatar:""}},[t._v("品牌"),e("q-icon",{attrs:{name:"inbox"}})],1),e("q-item-section",[e("q-list",[e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"全部品牌"},model:{value:t.brand,callback:function(a){t.brand=a},expression:"brand"}},[t._v("全部")])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"華碩"},model:{value:t.brand,callback:function(a){t.brand=a},expression:"brand"}},[t._v("華碩")])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"技嘉"},model:{value:t.brand,callback:function(a){t.brand=a},expression:"brand"}},[t._v("技嘉")])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"微星"},model:{value:t.brand,callback:function(a){t.brand=a},expression:"brand"}},[t._v("微星")])],1)],1)],1)],1)],1),e("q-separator"),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[e("q-item-section",{attrs:{avatar:""}},[t._v("類別"),e("q-icon",{attrs:{name:"category"}})],1),e("q-item-section",[e("q-list",[e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"全部類別"},model:{value:t.brand,callback:function(a){t.brand=a},expression:"brand"}},[t._v("全部")])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"主機板"},model:{value:t.brand,callback:function(a){t.brand=a},expression:"brand"}},[t._v("主機板")])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"顯示卡"},model:{value:t.brand,callback:function(a){t.brand=a},expression:"brand"}},[t._v("顯示卡")])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"筆記型電腦"},model:{value:t.brand,callback:function(a){t.brand=a},expression:"brand"}},[t._v("筆記型電腦")])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"套裝電腦"},model:{value:t.brand,callback:function(a){t.brand=a},expression:"brand"}},[t._v("套裝電腦")])],1)],1)],1)],1)],1),e("q-separator"),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[e("q-item-section",{attrs:{avatar:""}},[t._v("價格"),e("q-icon",{attrs:{name:"paid"}})],1),e("q-item-section",[e("q-list",[e("q-input",{attrs:{label:"最小值",outlined:""},model:{value:t.min,callback:function(a){t.min=a},expression:"min"}}),e("q-input",{staticClass:"q-my-lg",attrs:{label:"最大值",outlined:""},model:{value:t.max,callback:function(a){t.max=a},expression:"max"}}),e("q-btn",{attrs:{label:"重置"},on:{click:t.reset}})],1)],1)],1)],1)],1)],1),e("div",{staticClass:"row q-px-xl"},[e("div",{staticClass:"col-6 q-mt-xl",attrs:{id:"breadcrumbs"}},[e("q-breadcrumbs",[e("q-breadcrumbs-el",{attrs:{label:"首頁",icon:"home",to:"/"}}),e("q-breadcrumbs-el",{attrs:{label:"最新商品",icon:"widgets",to:"/adminProduct"}}),e("q-breadcrumbs-el",[t._v(t._s(t.brand)+" / 價格區間 : $"+t._s(t.min)+" ~ $"+t._s(t.max))])],1)],1),e("div",{staticClass:"col-6 flex justify-end",attrs:{id:"count"}},[e("h6",[t._v("總共 "+t._s(t.filter.length)+" 筆商品")])])]),e("div",{staticClass:"row q-pa-xl q-col-gutter-xl"},t._l(t.filter,(function(t){return e("div",{key:t._id,staticClass:"col-12 col-md-6 col-lg-4 col-xl-3",attrs:{id:"product"}},[e("ProductCard",{staticClass:"cardFloat",attrs:{product:t}})],1)})),0)],1)},i=[],n=e("c973"),s=e.n(n),c=(e("96cf"),e("4de4"),e("caad"),e("2532"),e("d81d"),e("99af"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"productCard"}},[e("div",{staticClass:"row items-start q-gutter-md"},[e("q-card",{staticClass:"my-card",attrs:{id:"product"}},[e("router-link",{attrs:{to:"/adminProductBuy/"+t.product._id,target:"_blank"}},[e("q-img",{attrs:{src:t.product.image,title:"查看更多資訊"}})],1),e("q-card-section",{attrs:{id:"name"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"text-h5 text-center"},[t._v(t._s(t.product.name))])])])]),e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"text-h5 text-center text-red q-mb-md"},[t._v("$ "+t._s(t.product.price))])]),e("div",{staticClass:"col-12",staticStyle:{width:"100%"}},[e("q-form",{staticClass:"flex",attrs:{id:"form"}},[e("q-input",{staticStyle:{"margin-right":"auto"},attrs:{type:"number",state:t.amountstate,title:"選擇商品數量"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"sell"}})]},proxy:!0}]),model:{value:t.amount,callback:function(a){t.amount=t._n(a)},expression:"amount"}}),e("q-btn",{attrs:{flat:"",icon:"add_shopping_cart",title:"加入購物車"},on:{click:t.addcart}}),e("q-btn",{attrs:{flat:"",icon:"favorite_border",title:"加入收藏清單"},on:{click:t.addFavorite}})],1)],1)])])],1)],1)])}),o=[],l={name:"ProductCard",props:{product:{type:Object,required:!0}},data:function(){return{amount:0}},computed:{amountstate:function(){return 0===this.amount?null:this.amount>0}},methods:{addcart:function(){var t=this;return s()(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.amountstate){a.next=3;break}return t.$swal({icon:"error",title:"錯誤",text:"商品數量必須 > 0"}),a.abrupt("return");case 3:if(0!==t.$store.state.user.jwt.token.length){a.next=6;break}return t.$swal({icon:"error",title:"錯誤",text:"請先登入"}),a.abrupt("return");case 6:return a.prev=6,a.next=9,t.axios.post("/users/cart",{product:t.product._id,amount:t.amount},{headers:{authorization:"Bearer "+t.$store.state.user.jwt.token}});case 9:t.$swal({icon:"success",title:"成功",text:"成功加入購物車"}),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](6),t.$swal({icon:"error",title:"錯誤",text:"加入購物車失敗"}),console.log(a.t0);case 16:case"end":return a.stop()}}),a,null,[[6,12]])})))()},addFavorite:function(){var t=this;return s()(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==t.$store.state.user.jwt.token.length){a.next=3;break}return t.$swal({icon:"error",title:"錯誤",text:"請先登入"}),a.abrupt("return");case 3:return a.prev=3,a.next=6,t.axios.post("/users/favorite",{product:t.product._id,amount:1},{headers:{authorization:"Bearer "+t.$store.state.user.jwt.token}});case 6:t.$swal({icon:"success",title:"成功",text:"成功加入收藏清單"}),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](3),t.$swal({icon:"error",title:"錯誤",text:"此商品已在收藏清單內"}),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[3,9]])})))()}}},d=l,u=e("2877"),m=e("f09f"),p=e("068f"),v=e("a370"),b=e("0378"),q=e("27f9"),f=e("0016"),x=e("9c40"),w=e("eebe"),g=e.n(w),h=Object(u["a"])(d,c,o,!1,null,null,null),k=h.exports;g()(h,"components",{QCard:m["a"],QImg:p["a"],QCardSection:v["a"],QForm:b["a"],QInput:q["a"],QIcon:f["a"],QBtn:x["a"]});var _={name:"AdminProduct",data:function(){return{products:[],drawer:!1,miniState:!0,brand:[],min:1,max:99999}},components:{ProductCard:k},methods:{reset:function(){this.min=1,this.max=99999}},computed:{filter:function(){var t=this;return this.products.filter((function(a){return null==t.brand[0]&&a.price<t.max&&a.price>t.min||(!!((t.brand.includes("".concat(a.brand))||t.brand.includes("".concat(a.cate)))&&a.price>t.min&&a.price<t.max)||!!((t.brand.includes("全部品牌")||t.brand.includes("全部類別"))&&a.price>t.min&&a.price<t.max))}))}},mounted:function(){var t=this;return s()(regeneratorRuntime.mark((function a(){var e,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.axios.get("/products");case 3:e=a.sent,r=e.data,t.products=r.result.map((function(t){return t.image&&(t.image="".concat("https://renly-eshop.herokuapp.com","/files/").concat(t.image)),t})),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()}},C=_,Q=e("9989"),$=e("9404"),y=e("4983"),N=e("1c1c"),S=e("66e5"),j=e("4074"),P=e("3786"),R=e("eb85"),B=e("ead5"),I=e("079e"),F=e("714f"),E=Object(u["a"])(C,r,i,!1,null,null,null);a["default"]=E.exports;g()(E,"components",{QPage:Q["a"],QDrawer:$["a"],QScrollArea:y["a"],QList:N["a"],QItem:S["a"],QItemSection:j["a"],QIcon:f["a"],QRadio:P["a"],QSeparator:R["a"],QInput:q["a"],QBtn:x["a"],QBreadcrumbs:B["a"],QBreadcrumbsEl:I["a"]}),g()(E,"directives",{Ripple:F["a"]})}}]);